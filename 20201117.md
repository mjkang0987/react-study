**20201117-섹션6.리듀서, 스토어**

## reducer
- 액션이 발생했을 떄 새로운 상태값을 만드는 함수
- 리덕스의 상태값을 수정하는 유일한 방법은 action 객체와 함께 dispatch 메서드를 호출하는 것이다.
  - 다른 어떤 방법으로도 상태값을 수정하면 안된다.
- 상태값은 dispatch 메서드가 호출괸 순서대로 리덕스 내부에서 변경되기때문에 상태값이 변화되는 과정을 쉽게 이해할 수 있다.
- **상태값은 불볍 객체로 관리해야한다.**
- 리덕스가 처음 실행될 때 state에 `undefined`를 넣어서 리듀서를 실행한다.
  - 첫 번째 매개변수는 초기값을 설저한다.
  - 두 번재 매개변수는 액션 객체가 넘어온다.
- 액션 객체의 타입에 따라서 해당하는 처리를 해주면된다.


### 불변객객체
- 이전상태와 다음상태를 단순 비교로 확인할 수 있다는 장점
```jsx
prevState.user === nextState.user;
```
- 수정하려는 값이 객체 깊은 곳에 있다면 전개연산자를 사용하는 것이 번거롭다.
```jsx
const reducer = (state = INITIAL_STATE, action) => {
  switch (action.type) {
    case REMOVE_ALL:
      return {
        ...state, // 전개연산자
        todos: []  
    } 
  }
}
```

#### immer
- 상태값 수정 로직을 간편하게 사용할 수 있는 라이브러리

### 주의사항
- 객체를 가리킬때는 객체의 레퍼런스 값이 아니라 고유한 아이디 값을 아용하는 것이 좋다.
- reducer는 순수함수로 작성해야한다.
  - 부수효과가 없어야한다.(외부상태 변경)
  - 입력이 같으면 출력이 같아야한다.
    - random 함수 / time 함수를 사용하지 않는 것이 좋다.

### store
- createStore 함수를 사용한다.
  - reducer를 넣어서 호출하면 store가 생성된다
```jsx
const store = createStore(reducer);
```
- 상태값 저장하는 역할을 한다.
- 액션처리가 끝났음을 외부에 알려주는 역할을 한다.
  - store의 subscribe 메서드를 호출해서 함수를 입력하면된다.
  - 액션을 발생시켰을 때에 액션에 대한 처리가 끝나면 입력한 함수를 호출한다.
